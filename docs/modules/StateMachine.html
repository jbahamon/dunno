<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <title>Reference</title>
    <link rel="stylesheet" href="../luadoc.css" type="text/css" />
	<!--meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/-->
</head>

<body>
<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->

<div id="main">

<div id="navigation">


<h1>LuaDoc</h1>
<ul>
	
	<li><a href="../index.html">Index</a></li>
	
</ul>


<!-- Module list -->

<h1>Modules</h1>
<ul>

	<li>
		<a href="../modules/Element.html">Element</a>
	</li>

	<li>
		<a href="../modules/State.html">State</a>
	</li>

	<li><strong>StateMachine</strong></li>
	
	<li>
		<a href="../modules/dunno.html">dunno</a>
	</li>

</ul>



<!-- File list -->

<h1>Files</h1>
<ul>

	<li>
		<a href="../files/conf.html">conf.lua</a>
	</li>

	<li>
		<a href="../files/data/core/Element/ElementState.html">data/core/Element/ElementState.lua</a>
	</li>

	<li>
		<a href="../files/data/core/Element/init.html">data/core/Element/init.lua</a>
	</li>

	<li>
		<a href="../files/data/core/StateMachine/State.html">data/core/StateMachine/State.lua</a>
	</li>

	<li>
		<a href="../files/data/core/StateMachine/init.html">data/core/StateMachine/init.lua</a>
	</li>

	<li>
		<a href="../files/main.html">main.lua</a>
	</li>

	<li>
		<a href="../files/oldmain.html">oldmain.lua</a>
	</li>

</ul>






</div><!-- id="navigation" -->

<div id="content">

<h1>Module <code>StateMachine</code></h1>

<p>A state machine implementation. It is the base for all elements (player, enemy and neutral) in the game. Can also be used for non-element behavior. <br /></p>






<h2>Functions</h2>
<table class="function_list">

	<tr>
	<td class="name" nowrap><a href="#StateMachine">StateMachine</a>&nbsp;()</td>
	<td class="summary">Builds a new StateMachine with no states.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#StateMachine:addState">StateMachine:addState</a>&nbsp;(state)</td>
	<td class="summary">Adds a state to the machine.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#StateMachine:changeToState">StateMachine:changeToState</a>&nbsp;(nextState)</td>
	<td class="summary">Executes a transition to a specified state.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#StateMachine:checkStateChange">StateMachine:checkStateChange</a>&nbsp;()</td>
	<td class="summary">Checks for conditions and executes any possible state change.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#StateMachine:getInitialState">StateMachine:getInitialState</a>&nbsp;()</td>
	<td class="summary">Returns the state machine's initial state </td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#StateMachine:getStateFlags">StateMachine:getStateFlags</a>&nbsp;()</td>
	<td class="summary">Retrieves the current state's flags.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#StateMachine:removeState">StateMachine:removeState</a>&nbsp;(stateName)</td>
	<td class="summary">Removes a state from the machine, leaving it with no owner.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#StateMachine:setInitialState">StateMachine:setInitialState</a>&nbsp;(stateName)</td>
	<td class="summary">Sets the machine's initial state.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#StateMachine:update">StateMachine:update</a>&nbsp;(dt)</td>
	<td class="summary">Updates the state machine.</td>
	</tr>

</table>





<br/>
<br/>



<h2><a name="functions"></a>Functions</h2>
<dl class="function">



<dt><a name="StateMachine"></a><strong>StateMachine</strong>&nbsp;()</dt>
<dd>
Builds a new StateMachine with no states.







<h3>Return value:</h3>
<ul>The newly created StateMachine.</ul>



</dd>




<dt><a name="StateMachine:addState"></a><strong>StateMachine:addState</strong>&nbsp;(state)</dt>
<dd>
Adds a state to the machine. A state can only belong to a single machine at a time: it should not belong to another state machine when this method is called. Call removeState on the other machine first.


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>state</em></code>: The state to be added.
	</li>
	
</ul>








</dd>




<dt><a name="StateMachine:changeToState"></a><strong>StateMachine:changeToState</strong>&nbsp;(nextState)</dt>
<dd>
Executes a transition to a specified state. The current state's onExitTo and the target state's onEnterFrom are executed, if found.


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>nextState</em></code>: The target state.
	</li>
	
</ul>








</dd>




<dt><a name="StateMachine:checkStateChange"></a><strong>StateMachine:checkStateChange</strong>&nbsp;()</dt>
<dd>
Checks for conditions and executes any possible state change. If two or more transitions are possible, the one with higher priority is taken (or the one that was added first, if there is more than one transition with the sane priority). State transition conditions take a single argument: the current state.









</dd>




<dt><a name="StateMachine:getInitialState"></a><strong>StateMachine:getInitialState</strong>&nbsp;()</dt>
<dd>
Returns the state machine's initial state







<h3>Return value:</h3>
<ul>The machine's initial state.</ul>



</dd>




<dt><a name="StateMachine:getStateFlags"></a><strong>StateMachine:getStateFlags</strong>&nbsp;()</dt>
<dd>
Retrieves the current state's flags.





<h3>Usage:</h3>
<ul><pre class=example>local foo = machine:getStateFlags()<br />assert(foo["someStateFlag"], "The state flag is not set")</pre></ul>



<h3>Return value:</h3>
<ul>flags The current state's flag table.</ul>



</dd>




<dt><a name="StateMachine:removeState"></a><strong>StateMachine:removeState</strong>&nbsp;(stateName)</dt>
<dd>
Removes a state from the machine, leaving it with no owner.


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>stateName</em></code>: The name of the state to be removed. If there is no state with such name in the machine, nothing is done.
	</li>
	
</ul>








</dd>




<dt><a name="StateMachine:setInitialState"></a><strong>StateMachine:setInitialState</strong>&nbsp;(stateName)</dt>
<dd>
Sets the machine's initial state.


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>stateName</em></code>: The name of the state to be set as the machine's initial state. There must be a state with this name in the machine, or an error will be raised.
	</li>
	
</ul>








</dd>




<dt><a name="StateMachine:update"></a><strong>StateMachine:update</strong>&nbsp;(dt)</dt>
<dd>
Updates the state machine.


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>dt</em></code>: Time since the last update, in seconds.
	</li>
	
</ul>








</dd>


</dl>






</div> <!-- id="content" -->

</div> <!-- id="main" -->

<div id="about">
	<p><a href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0!" height="31" width="88" /></a></p>
</div> <!-- id="about" -->

</div> <!-- id="container" -->	
</body>
</html>
